(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{73459:function(e,r,t){Promise.resolve().then(t.bind(t,61076)),Promise.resolve().then(t.bind(t,66066))},61076:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return V}});var l=t(27573),a=t(41639),n=t(20918),i=t(78953),o=t(41958),s=t(92521),d=t(76718),c=t(99396),x=t(61931),u=t(76928);let p=e=>{let{onClose:r,title:t}=e;return(0,l.jsxs)(a.X2,{sx:{justifyContent:"space-between",p:"1rem"},children:[(0,l.jsx)(d.Z,{fontWeight:"600",color:"text.primary",variant:"h5",children:t}),(0,l.jsx)(c.Z,{onClick:r,children:(0,l.jsx)(o.Z,{})})]})},h=e=>{let{token:r,value:t,onChange:n,balance:o,title:s="Amount",balanceUsdMultiplier:c=1}=e,u=String(o);return(0,l.jsxs)(i.Z,{sx:{p:"0.5rem 1rem",borderRadius:"0.75rem"},children:[(0,l.jsx)(a.X2,{children:(0,l.jsx)(d.Z,{variant:"body2",color:"text.primary",children:s})}),(0,l.jsxs)(a.X2,{sx:{border:"1px solid rgba(54, 56, 67, 1)",p:"0.3rem 0.5rem",borderRadius:"0.8rem",mt:"0.5rem"},children:[(0,l.jsx)(b,{value:t,onChange:e=>n(e.target.value),max:o}),(0,l.jsx)(i.Z,{sx:{borderRadius:"0.5rem",p:"6px 8px",background:"background.secondary"},children:(0,l.jsx)(a.Xw,{currency:r,showName:!0})})]}),(0,l.jsxs)(a.X2,{justifyContent:"space-between",sx:{mt:"0.5rem"},children:[(0,l.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Balance: ",(0,a.az)(o,0,2)]}),(0,l.jsx)(a.X2,{gap:"2px",children:(0,l.jsx)(x.Z,{variant:"outlined",sx:{padding:"2px 8px",minWidth:"20px",borderRadius:"1rem",textTransform:"capitalize",fontSize:"0.75rem"},onClick:()=>n(u),children:"Max"})})]})]})},m=e=>{let{summaries:r}=e;return(0,l.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",p:"1rem 1rem",borderRadius:"0.5rem","> *":{flex:"1 1 0",width:"100%"}},gap:"4px",children:[(0,l.jsx)(d.Z,{variant:"body1",color:"text.primary",fontWeight:"600",sx:{mb:"0.5rem"},children:"Transaction overview"}),r.map(e=>(0,l.jsxs)(a.X2,{justifyContent:"space-between",gap:"8px",children:[(0,l.jsx)(d.Z,{variant:"body1",color:"text.secondary",children:e.label}),"string"==typeof e.value?(0,l.jsx)(d.Z,{variant:"body1",color:e.valueColor,children:e.value}):e.value]},e.label))]})},b=u.ZP.input.attrs(()=>({onWheel:e=>e.target.blur(),onKeyDown:e=>["e","E","+","-"].includes(e.key)&&e.preventDefault(),placeholder:"0.0",min:"0",autoComplete:"off",pattern:"^[0-9]*[.,]?[0-9]*$",type:"number"})).withConfig({componentId:"sc-e99b7818-0"})(["width:100%;background-color:transparent;border:0;outline-color:transparent;padding:0rem 0rem 0px 0.5rem;font-size:1.25rem;font-weight:500;flex-grow:2;color:",";opacity:",";outline:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;&:focus-visible{outline:1px solid ",";}&:active,&:focus{outline-color:transparent;}&::-webkit-outer-spin-button,&::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}"],e=>e.$isLoading?e.theme.textSecondary:e.theme.textPrimary,e=>e.$isLoading?"0.5":"1",e=>{var r;return null===(r=e.theme)||void 0===r?void 0:r.accent}),j=e=>{let{currentValue:r,updatedValue:t,variant:n}=e,i=r===1/0,o=t===1/0;return void 0===r?(0,l.jsx)(d.Z,{variant:n,children:"-"}):void 0===t?(0,l.jsx)(d.Z,{color:i||(null!=r?r:2)>1.000001?"#66F398":"#D33C5D",variant:n,children:i?"∞":(0,a.az)(r,0,2)}):(0,l.jsxs)(a.X2,{gap:"8px",children:[(0,l.jsx)(d.Z,{variant:n||"body1",color:i||(null!=r?r:2)>1.000001?"#66F398":"#D33C5D",children:i?"∞":(0,a.az)(r,0,2)}),(0,l.jsx)(s.Z,{sx:{width:"14px"}}),(0,l.jsx)(d.Z,{variant:n||"body1",color:i||(null!=t?t:2)>1.000001?"#66F398":"#D33C5D",children:o?"∞":(0,a.az)(t,0,2)})]})};var v=t(65372),g=t(75270),y=t(18483),Z=t(34287),f=t(9479),k=t(88510),w=t(7653),C=t(31485);function D(e){var r,t,o,s,c,u;let{isOpen:b,onClose:g,token:y}=e,{depositAmount:D,setDepositAmount:F,onDeposit:R,onReset:S,isDisabled:X,ctaText:U,isLoading:z,summary:A,onChangeEnterMarket:W,isEnterMarketLoading:B}=(0,n.Mx)((null==y?void 0:y.address)||"",e=>{e&&g()}),P=(0,v.Z)();(0,w.useEffect)(()=>{S()},[b]);let N=A.isBorrowAvailable&&!!(null===(r=A.tokenDetails)||void 0===r?void 0:r.oraclePriceFeedId)&&!!(null===(t=A.tokenDetails)||void 0===t?void 0:t.collateralFactor);return(0,l.jsx)(C.Z,{open:b,onClose:g,children:(0,l.jsxs)(i.Z,{sx:{p:"0 1rem 2rem 1rem",width:"100%",margin:"auto",maxWidth:"420px",borderRadius:"1rem",background:P.palette.background.paper,marginTop:"15vh"},children:[(0,l.jsx)(p,{onClose:g,title:"Deposit"}),(0,l.jsx)(h,{token:y,value:D,onChange:e=>F(e),balance:null==y?void 0:y.userBalancePrecised}),N&&(0,l.jsx)(a.X2,{sx:{mt:"1rem",cursor:"pointer"},children:(0,l.jsxs)(d.Z,{variant:"body2",color:"text.secondary",onClick:()=>{var e;W((null===(e=A.tokenDetails)||void 0===e?void 0:e.address)||"")},children:[(0,l.jsx)(f.Z,{checked:null===(o=A.tokenDetails)||void 0===o?void 0:o.isEnteredMarket,onChange:()=>{var e;return W((null===(e=A.tokenDetails)||void 0===e?void 0:e.address)||"")},disabled:!(null===(s=A.tokenDetails)||void 0===s?void 0:s.oraclePriceFeedId)||!(null===(c=A.tokenDetails)||void 0===c?void 0:c.collateralFactor)||(null===(u=A.tokenDetails)||void 0===u?void 0:u.totalUserBorrowed)>0}),(0,l.jsx)("span",{style:{marginLeft:"8px"},children:"Available as collateral"}),B&&(0,l.jsx)(Z.Z,{size:"20px",style:{marginLeft:"4px",position:"relative",top:"3px"}})]})}),(0,l.jsx)(m,{summaries:[{label:"Supply APY",value:(0,a.az)(A.supplyApy,0,4)+"%",valueColor:"success"},{label:"Health Score",value:(0,l.jsx)(j,{currentValue:A.healthFactor,updatedValue:A.updatedHealthFactor})}]}),(0,l.jsx)(x.Z,{fullWidth:!0,sx:{mt:"1rem",borderRadius:"1rem"},disabled:X||z||B,onClick:R,variant:"contained",children:U}),(0,l.jsx)(x.Z,{fullWidth:!0,sx:{mt:"1rem",borderRadius:"1rem",background:(0,k.Fq)(P.palette.text.primary,.12),color:"white"},onClick:g,variant:"text",children:"Cancel"})]})})}var F=t(92402),R=t(14611),S=t(26359),X=t(1586),U=t(92251),z=t(48740),A=t(59089);function W(e,r,t){return r[t]<e[t]?-1:r[t]>e[t]?1:0}function B(e){let{order:r,orderBy:t,onRequestSort:a,data:n}=e,o=e=>r=>{a(r,e)},s=(0,v.Z)();return(0,l.jsx)(X.Z,{sx:{background:(0,k.Fq)(s.palette.background.secondary||"",.5)},children:(0,l.jsx)(g.Z,{children:n.map(e=>(0,l.jsx)(y.Z,{align:e.align||"left",padding:"none",sortDirection:t===e.id&&r,children:(0,l.jsxs)(U.Z,{active:t===e.id,direction:t===e.id?r:"asc",onClick:o(e.id),sx:{p:"8px 12px",whiteSpace:"nowrap",color:s.palette.text.secondary},children:[e.label,t===e.id?(0,l.jsx)(i.Z,{component:"span",sx:A.Z,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id))})})}function P(e){let{order:r,orderBy:t,data:a,setOrder:n,heads:o,setOrderBy:s,renderItem:d}=e,c=(0,v.Z)(),x=w.useMemo(()=>(function(e,r){let t=null==(e=e||[])?void 0:e.map((e,r)=>[e,r]);return t.sort((e,t)=>{let l=r(e[0],t[0]);return 0!==l?l:e[1]-t[1]}),t.map(e=>e[0])})(a,"desc"===r?(e,r)=>W(e,r,t):(e,r)=>-W(e,r,t)),[r,t,JSON.stringify(a)]);return(0,l.jsx)(i.Z,{sx:{width:"100%"},children:(0,l.jsx)(z.Z,{sx:{width:"100%",mb:2},children:(0,l.jsx)(S.Z,{children:(0,l.jsxs)(F.Z,{size:"medium",sx:{background:c.palette.background.paper},children:[(0,l.jsx)(B,{order:r,orderBy:t,onRequestSort:(e,l)=>{n(t===l&&"asc"===r?"desc":"asc"),s(l)},data:o}),(0,l.jsx)(R.Z,{children:x.map((e,r)=>d(e,r))})]})})})})}var N=t(11894);function O(){return(0,l.jsx)(N.Z,{severity:"warning",children:"Withdrawing this amount might result in liquidation of your open borrow position."})}function E(e){var r;let{isOpen:t,onClose:o,token:s}=e,{withdrawAmount:d,setWithdrawAmount:c,onWithdraw:u,onReset:b,isDisabled:g,ctaText:y,isLoading:Z,summary:f}=(0,n.Ts)((null==s?void 0:s.address)||"",e=>{e&&o()}),D=(0,v.Z)();return(0,w.useEffect)(()=>{b()},[t]),(0,l.jsx)(C.Z,{open:t,onClose:o,children:(0,l.jsxs)(i.Z,{sx:{p:"0 1rem 2rem 1rem",width:"100%",margin:"auto",maxWidth:"420px",borderRadius:"1rem",background:D.palette.background.paper,marginTop:"15vh"},children:[(0,l.jsx)(p,{onClose:o,title:"Withdraw"}),(0,l.jsx)(h,{token:s,value:d,onChange:e=>c(e),balance:(null===(r=f.tokenDetails)||void 0===r?void 0:r.totalUserUnderlyingDepositPrecised)||0,balanceUsdMultiplier:1}),f.updatedHealthFactor!=1/0&&f.updatedHealthFactor<=1.01&&(0,l.jsx)(O,{}),(0,l.jsx)(m,{summaries:[{label:"Remaining Supply",value:"".concat((0,a.az)(null==f?void 0:f.updatedLpAmount,0,4)," ").concat(null==s?void 0:s.symbol),valueColor:"textLight"},{label:"Health score",value:(0,l.jsx)(j,{currentValue:f.healthFactor,updatedValue:f.updatedHealthFactor})}]}),(0,l.jsx)(x.Z,{fullWidth:!0,sx:{mt:"1rem",borderRadius:"1rem"},disabled:g||Z,onClick:u,variant:"contained",children:y}),(0,l.jsx)(x.Z,{fullWidth:!0,sx:{mt:"1rem",borderRadius:"1rem",background:(0,k.Fq)(D.palette.text.primary,.12),color:"white"},onClick:o,variant:"text",children:"Cancel"})]})})}function T(){var e,r;let[t,o]=(0,w.useState)(null),[s,c]=(0,w.useState)(null),[u,p]=(0,w.useState)("asc"),[h,m]=(0,w.useState)(""),b=(0,v.Z)(),{chain:j}=(0,a.Os)(),{onChangeEnterMarket:C,isLoading:F,activeTokenAddress:R}=(0,n.c7)(),S=()=>{o(null),c(null)},X=e=>{o(e)},U=e=>{c(e)},{data:z}=(0,n.al)(),{isLoading:A}=(0,n.OK)(),W=(null==z?void 0:z.tokens)||[];return(0,l.jsxs)(i.Z,{sx:{borderRadius:"0.5rem",overflow:"auto",alignSelf:"flex-start",minHeight:{xs:"200px",sm:"300px"},p:"1.5rem 0",background:b.palette.background.paper},className:"aqua-user-box",children:[(0,l.jsx)(E,{isOpen:!!t,onClose:S,token:t}),(0,l.jsx)(D,{isOpen:!!s,onClose:S,token:s}),(0,l.jsxs)(a.X2,{gap:".5rem",sx:{mb:"1rem",p:"0 1rem"},children:[(0,l.jsx)(a.X2,{children:(0,l.jsx)(d.Z,{fontWeight:"600",variant:"h6",children:"Your Supplied"})}),(0,l.jsx)(a.X2,{sx:{p:"2px 6px",borderRadius:"4px",background:b.palette.background.secondary},children:(0,l.jsx)(d.Z,{variant:"body2",children:(null==z?void 0:null===(e=z.tokens)||void 0===e?void 0:e.length)||0})})]}),(0,l.jsx)(P,{order:u,orderBy:h,setOrder:p,setOrderBy:m,heads:[{label:"Asset",id:"symbol",sortable:!0},{label:"Supplied",id:"totalUserUnderlyingDepositUsd",sortable:!0},{label:"APY",id:"supplyRate",sortable:!0},{label:"collateral",id:"isEnteredMarket",sortable:!1},{label:"Actions",id:"Action",sortable:!1}],data:W,renderItem:(e,r)=>(0,l.jsxs)(g.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,l.jsx)(y.Z,{children:(0,l.jsx)(a.Xw,{currency:e,showName:!0})}),(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(d.Z,{variant:"body2",display:"block",children:(0,a.az)(e.totalUserUnderlyingDeposit,0,4)}),(0,l.jsx)(d.Z,{variant:"body2",display:"block",color:"text.secondary",children:(0,a.YZ)(e.totalUserUnderlyingDepositUsd)})]}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(d.Z,{variant:"body2",display:"block",color:"text.secondary",children:(0,a.az)(e.totalUserUnderlyingDepositUsd)})}),(0,l.jsx)(y.Z,{children:F&&R===e.address?(0,l.jsx)(Z.Z,{sx:{width:"20px"}}):(0,l.jsx)(d.Z,{variant:"body2",children:(0,l.jsx)(f.Z,{checked:e.isEnteredMarket,onChange:()=>C(e.address),disabled:!e.oraclePriceFeedId||!e.collateralFactor||e.totalUserBorrowed>0,sx:{cursor:e.oraclePriceFeedId&&e.collateralFactor&&!(e.totalUserBorrowed>0)?"default":"disabled"}})})}),(0,l.jsx)(y.Z,{align:"right",children:(0,l.jsxs)(a.X2,{className:"action-button-group",sx:{display:"flex",gap:"6px",justifyContent:"flex-end",alignItems:"center"},children:[(0,l.jsx)(x.Z,{onClick:()=>U(e),sx:{background:(0,k.Fq)(b.palette.primary.main,.1),color:b.palette.primary.main,borderRadius:"12px",textTransform:"capitalize"},children:"Supply"}),(0,l.jsx)(x.Z,{onClick:()=>X(e),sx:{background:(0,k.Fq)(b.palette.primary.main,.1),color:b.palette.primary.main,borderRadius:"12px",textTransform:"capitalize"},children:"Withdraw"})]})})]},r)}),!A&&!(null==z?void 0:null===(r=z.tokens)||void 0===r?void 0:r.length)&&(0,l.jsx)(a.X2,{sx:{justifyContent:"center",pt:"1rem"},children:(0,l.jsx)(d.Z,{color:"text.secondary",children:"No Token"})}),A&&(0,l.jsx)(a.X2,{sx:{justifyContent:"center",pt:"1rem"},children:(0,l.jsx)(Z.Z,{})})]})}var q=t(40569),I=t(96072),H=t.n(I),M=function(e){let{items:r}=e,t=(0,v.Z)();return(0,l.jsx)(a.X2,{sx:{width:"100%",flex:"1 1 0",gap:"1rem",flexWrap:"wrap",margin:"auto",maxWidth:"1240px"},children:r.map(e=>{let r=e.TooltipElement||"div";return(0,l.jsxs)(a.X2,{sx:{background:t.palette.background.paper,padding:"1.5rem",border:"1px solid ".concat(t.palette.outline),borderRadius:"1rem",flex:"1 1 0",gap:"1rem"},children:[(0,l.jsx)(a.X2,{sx:{background:(0,k.Fq)(e.color||"",.4),padding:"1rem",borderRadius:"0.5rem"},children:(0,l.jsx)(H(),{src:e.icon||"",alt:"",width:40,height:40})}),(0,l.jsxs)(i.Z,{children:[(0,l.jsx)("div",{style:{fontSize:"2rem"},children:"string"==typeof e.value?(0,l.jsx)(d.Z,{variant:"h4",display:"block",fontWeight:"500",children:e.value}):e.value}),(0,l.jsx)(r,{children:(0,l.jsxs)(a.X2,{children:[(0,l.jsx)(d.Z,{variant:"body1",color:"text.secondary",sx:{whiteSpace:"nowrap",mr:"4px"},display:"block",children:e.label}),e.TooltipElement&&(0,l.jsx)(q.Z,{color:"disabled",sx:{width:"16px"}})]})},e.label)]})]},e.label)})})},L=t(65018),Y=t(32031);function _(){let[e,r]=(0,w.useState)(null),[t,o]=(0,w.useState)("asc"),[s,c]=(0,w.useState)(""),u=(0,v.Z)(),p=e=>{r(e)},{data:h,isLoading:m}=(0,n.OK)(),b=h||[];return(0,l.jsxs)(i.Z,{sx:{borderRadius:"0.5rem",overflow:"auto",alignSelf:"flex-start",minHeight:{xs:"200px",sm:"300px"},p:"1.5rem 0",background:u.palette.background.paper},className:"aqua-user-box",children:[(0,l.jsx)(D,{isOpen:!!e,onClose:()=>{r(null)},token:e}),(0,l.jsxs)(a.X2,{gap:".5rem",sx:{mb:"1rem",p:"0 1rem"},children:[(0,l.jsx)(a.X2,{children:(0,l.jsx)(d.Z,{fontWeight:"600",variant:"h6",children:"Assets to supply"})}),(0,l.jsx)(a.X2,{sx:{p:"2px 6px",borderRadius:"4px",background:u.palette.background.secondary},children:(0,l.jsx)(d.Z,{variant:"body2",children:(null==b?void 0:b.length)||0})})]}),(0,l.jsx)(P,{order:t,orderBy:s,setOrder:o,setOrderBy:c,heads:[{label:"Asset",id:"symbol",sortable:!0},{label:"Wallet Balance",id:"userBalanceUsd",sortable:!0},{label:"APY",id:"supplyRate",sortable:!0},{label:"Can be collateral",id:"isEnteredMarket",sortable:!1},{label:"Action",id:"Action",sortable:!1}],data:b,renderItem:(e,r)=>(0,l.jsxs)(g.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,l.jsx)(y.Z,{children:(0,l.jsx)(a.Xw,{currency:e,showName:!0})}),(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(d.Z,{variant:"body2",display:"block",children:(0,a.az)(e.userBalance,0,4)}),(0,l.jsx)(d.Z,{variant:"body2",display:"block",color:"text.secondary",children:(0,a.YZ)(e.userBalanceUsd)})]}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(d.Z,{variant:"body2",display:"block",color:"text.secondary",children:(0,a.az)(e.totalUserUnderlyingDepositUsd)})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(d.Z,{variant:"body2",children:e.oraclePriceFeedId&&e.collateralFactor?(0,l.jsx)(Y.Z,{sx:{width:"18px"}}):"-"})}),(0,l.jsx)(y.Z,{align:"right",children:(0,l.jsx)(L.Z,{className:"action-button-group",sx:{gap:"6px",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,l.jsx)(x.Z,{onClick:()=>p(e),sx:{background:(0,k.Fq)(u.palette.primary.main,.1),color:u.palette.primary.main,borderRadius:"12px",textTransform:"capitalize",border:0},children:"Supply"})})})]},r)}),!m&&!(null==b?void 0:b.length)&&(0,l.jsx)(a.X2,{sx:{justifyContent:"center",pt:"1rem"},children:(0,l.jsx)(d.Z,{color:"text.secondary",children:"Nothing supplied yet"})}),m&&(0,l.jsx)(a.X2,{sx:{justifyContent:"center",pt:"1rem"},children:(0,l.jsx)(Z.Z,{})})]})}function V(){let{data:e}=(0,n.uQ)(),{walletAddress:r}=(0,a.Os)();return(0,l.jsxs)("div",{style:{width:"100%"},children:[(0,l.jsx)(M,{items:[{label:"Net balance",value:(null==e?void 0:e.totalDepositedUsd)?"".concat((0,a.az)(null==e?void 0:e.totalDepositedUsd,0,2,!0)):"-",icon:"/wallet-icon.svg",color:"rgba(244, 146, 31, 1)"},{label:"Net APY",value:(null==e?void 0:e.netSupplyApy)?"".concat((0,a.az)((null==e?void 0:e.netSupplyApy)-e.netBorrowApy,0,2,!1),"%"):"-",icon:"/apy-icon.svg",color:"rgba(82, 169, 153, 1)"},{label:"Account health",value:(0,l.jsx)(j,{currentValue:null==e?void 0:e.healthFactor,variant:"h4"}),icon:"/health-factor-icon.svg",color:"rgba(211, 60, 93, 1)"}]}),(0,l.jsxs)(i.Z,{sx:{width:"100%",maxWidth:"1248px",pb:"1rem",m:"auto",p:"0 0rem"},children:[!r&&(0,l.jsx)(a.RZ,{sublabel:"Please connect your wallet to see your supplies, borrowings, and open positions."}),r&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(i.Z,{sx:{display:"grid",gap:"1rem",justifyContent:"center",alignItems:"center",gridTemplateColumns:{xs:"repeat(auto-fill, minmax(300px, 1fr))",lg:"repeat(auto-fill, minmax(520px, 1fr))"},mt:"1rem",gridAutoRows:"max-content"},children:[(0,l.jsx)(T,{}),(0,l.jsx)(_,{})]})})]})]})}}},function(e){e.O(0,[5211,7359,9150,2999,8271,3383,1041,918,1293,4016,1744],function(){return e(e.s=73459)}),_N_E=e.O()}]);